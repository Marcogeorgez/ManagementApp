@inherits LayoutComponentBase
@inject NavigationManager NavigationManager

<MudThemeProvider />
<MudPopoverProvider />
<MudDialogProvider CloseButton="true"
                   BackdropClick="false"
                   Position="DialogPosition.Center"
                   CloseOnEscapeKey="true" />
<MudSnackbarProvider />

<CascadingValue Value="_drawerOpen">
    <MudLayout Style="position:absolute;">
        <NavMenu @rendermode="InteractiveServer" />
            @* Conditionally render @Body based on IsStaticSSR to ensure login flow *@
            @if (IsStaticSSR)
            {
                @Body
            }
            else
            {
                <MudHidden Breakpoint="Breakpoint.MdAndUp" Invert="true">
                <MudMainContent Style="height:auto; overflow-x: hidden; overflow-y: auto; padding-top:0px; ">

                        @Body
                </MudMainContent>
                </MudHidden>
                <MudHidden Breakpoint="Breakpoint.SmAndDown" Invert="true">
                    @Body
                </MudHidden>
            }


        <script>
            function submitForm(formId) {
                document.getElementById(formId).submit();
            }
        </script>

    </MudLayout>
</CascadingValue>

@code {
    private bool _drawerOpen = false;

    private bool IsStaticSSR => NavigationManager.Uri.Contains("/Account");
}
