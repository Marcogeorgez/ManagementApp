<MudDialog>
    <DialogContent>
            <MudSelect T="ProjectStatus" Class="mt-3" Variant="Variant.Outlined" Label="Status"
                       Value="@(_isClientView && Status == ProjectStatus.Ready_To_Review ? ProjectStatus.Working : Status)"
        Text="@GetStatusText()"
                       ValueChanged="@(newValue => Status = newValue)"
                       Required="true">
                @if (_isAdminView)
                {
                    @foreach (ProjectStatus status in Enum.GetValues(typeof(ProjectStatus)))
                    {
                        <MudSelectItem Value="@status">@status.ToString().Replace("_", " ")</MudSelectItem>
                    }
                }
                else if (_isEditorView)
                {
                <MudSelectItem Value="ProjectStatus.Ready_To_Review" Style="display:none;" Disabled="true">Ready to Review</MudSelectItem>
                <MudSelectItem Value="ProjectStatus.Ready_To_Edit" Style="display:none;" Disabled="true">Ready to Edit</MudSelectItem>
                    <MudSelectItem Value="ProjectStatus.Scheduled">Scheduled</MudSelectItem>
                    <MudSelectItem Value="ProjectStatus.Working">Working</MudSelectItem>
                    <MudSelectItem Value="ProjectStatus.Delivered">Delivered</MudSelectItem>
                }
                else
                {
                    <MudSelectItem Value="ProjectStatus.Ready_To_Edit">Ready to Edit</MudSelectItem>
                    <MudSelectItem Value="ProjectStatus.Revision">Revision</MudSelectItem>
                }
            </MudSelect>
    </DialogContent>
    <DialogActions>
        <MudButton Color=Color.Error OnClick="Cancel">Cancel</MudButton>
        <MudButton Color="Color.Primary" OnClick="Submit">Save</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] IMudDialogInstance MudDialog { get; set; }
    [Parameter] public ProjectStatus Status { get; set; }
    [Parameter] public bool _isAdminView { get; set; }
    [Parameter] public bool _isEditorView { get; set; }
    [Parameter] public bool _isClientView { get; set; }

    private void Submit()
    {
        MudDialog.Close(DialogResult.Ok(Status));
    }

    private void Cancel() => MudDialog.Cancel();

    private string GetStatusText()
    {
        if (_isClientView && Status == ProjectStatus.Ready_To_Review)
            return "Working";
        string _status = Status.ToString().Replace("_", " ");
        Console.WriteLine(_status);
        return _status;
    }
}
