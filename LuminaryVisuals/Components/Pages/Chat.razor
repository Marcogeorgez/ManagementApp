@using LuminaryVisuals.Components.Shared.Chat
@inject ChatService ChatService
@inject ProjectService ProjectService
@inject IDialogService DialogService

<MudFab StartIcon="@Icons.Material.Filled.Email"
        Class="floating-chat-icon"
        OnClick="OpenChatPopup" />

@code {
    [Parameter] public string userId { get; set; }
    [Parameter] public bool isAdminView { get; set; }
    [Parameter] public bool isEditorView{ get; set; }
    [Parameter] public bool isClientView{ get; set; }
    [CascadingParameter]
    public int timezoneOffsetMinutes { get; set; }


    private void OpenChatPopup()
    {
        var options = new DialogOptions
            {
                CloseButton = true,
                Position = DialogPosition.BottomRight,
                NoHeader = true
            };
        var parameters = new DialogParameters<ChatProjectListDialog>
        {
            { "userId" , userId },
            { "isAdminView" , isAdminView },
            { "isEditorView" , isEditorView },
            { "isClientView" , isClientView },

        };
        DialogService.ShowAsync<ChatProjectListDialog>("", parameters, options);
    }
}