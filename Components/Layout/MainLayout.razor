@inherits LayoutComponentBase
@inject NavigationManager NavigationManager

<MudThemeProvider />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />
<MudBreakpointProvider />

<CascadingValue Value="_drawerOpen">
    <MudLayout>
        <NavMenu @rendermode="InteractiveServer" />
        <MudMainContent Style="height:auto; overflow-x: hidden; overflow-y: auto;">

            @* Conditionally render @Body based on IsStaticSSR to ensure login flow *@
            @if (IsStaticSSR)
            {
                @Body
            }
            else
            {
                <MudHidden Breakpoint="Breakpoint.MdAndUp" Invert="true">
                    <MudContainer Class="" MaxWidth="MaxWidth.ExtraExtraLarge">
                        @Body
                    </MudContainer>
                </MudHidden>
                <MudHidden Breakpoint="Breakpoint.SmAndDown" Invert="true">
                    @Body
                </MudHidden>
            }

        </MudMainContent>
        <script>
            function submitForm(formId) {
                document.getElementById(formId).submit();
            }
        </script>

    </MudLayout>
</CascadingValue>

@code {
    private bool _drawerOpen = false;

    private bool IsStaticSSR => NavigationManager.Uri.Contains("/Account");
}
